<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>MY-LogiC | AI Contract Intelligence</title>
  
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* --- CORE VARIABLES --- */
    :root {
      --primary: #6366f1;
      --primary-hover: #4f46e5;
      --secondary: #ec4899;
      --accent: #06b6d4;
      --bg-dark: #0f172a;
      --bg-card: rgba(30, 41, 59, 0.7);
      --glass-border: rgba(255, 255, 255, 0.08);
      --text-main: #f8fafc;
      --text-muted: #94a3b8;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --radius: 16px;
      --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }

    /* --- RESET & BASE --- */
    * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
    
    body {
      font-family: "Times New Roman", serif;
      font-style: italic;
      background-color: var(--bg-dark);
      color: var(--text-main);
      min-height: 100vh;
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      /* Dynamic animated background */
      background-image: 
        radial-gradient(circle at 0% 0%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 100% 0%, rgba(236, 72, 153, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 100% 100%, rgba(6, 182, 212, 0.15) 0%, transparent 50%);
      background-attachment: fixed;
    }

    /* Smooth Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-dark); }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #475569; }

    /* --- ANIMATED BACKGROUND BLOBS --- */
    .blob-cont {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100vh;
      z-index: -1;
      pointer-events: none;
      overflow: hidden;
    }
    .blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.4;
      animation: float 20s infinite alternate;
    }
    .blob-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: var(--primary); animation-delay: 0s; }
    .blob-2 { bottom: -10%; right: -10%; width: 50vw; height: 50vw; background: var(--secondary); animation-delay: -5s; }
    .blob-3 { bottom: 20%; left: 20%; width: 30vw; height: 30vw; background: var(--accent); animation-delay: -10s; }

    @keyframes float { 
      0% { transform: translate(0, 0) scale(1); }
      100% { transform: translate(30px, 50px) scale(1.1); }
    }

    /* --- NAVBAR --- */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
      z-index: 100;
    }

    .logo {
      font-family: 'Outfit', sans-serif;
      font-weight: 700;
      font-size: 1.5rem;
      color: white;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .logo i { color: var(--primary); }

    .nav-actions { display: flex; gap: 1rem; align-items: center; }

    .btn-ghost {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--text-main);
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
    }
    .btn-ghost:hover { background: rgba(255,255,255,0.05); border-color: white; }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      color: white;
      padding: 0.6rem 1.5rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(99, 102, 241, 0.5); }

    /* --- USER DROPDOWN SECTION --- */
    .user-profile {
      position: relative;
      display: none; /* Hidden by default */
      align-items: center;
      cursor: pointer;
    }

    .user-info-trigger {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.5rem 0.8rem;
      border-radius: 50px;
      transition: background 0.2s;
    }
    .user-info-trigger:hover {
      background: rgba(255,255,255,0.05);
    }

    .avatar {
      width: 38px; height: 38px;
      background: linear-gradient(to right, #a855f7, #ec4899);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 1rem;
      color: white;
    }

    .user-dropdown-menu {
      position: absolute;
      top: 110%;
      right: 0;
      background: rgba(30, 41, 59, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 16px;
      width: 200px;
      padding: 0.5rem;
      box-shadow: var(--shadow-lg);
      transform: translateY(10px);
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
      z-index: 200;
    }

    .user-profile.active .user-dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.8rem 1rem;
      color: var(--text-muted);
      font-size: 0.9rem;
      font-weight: 500;
      border-radius: 8px;
      transition: all 0.2s;
      cursor: pointer;
    }
    .dropdown-item:hover {
      background: rgba(255,255,255,0.05);
      color: white;
    }

    .btn-logout-item {
      color: var(--danger);
      width: 100%;
      border: none;
      background: none;
      text-align: left;
    }
    .btn-logout-item:hover {
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
    }

    .dropdown-divider {
      height: 1px;
      background: rgba(255,255,255,0.08);
      margin: 0.5rem 0;
    }

    /* --- HERO & MAIN CONTENT --- */
    .container {
      flex: 1;
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .hero-text {
      text-align: center;
      margin-bottom: 3rem;
      animation: fadeInDown 0.8s ease-out;
    }
    
    .hero-text h1 {
      font-family: 'Outfit', sans-serif;
      font-size: clamp(2.5rem, 6vw, 4rem);
      line-height: 1.1;
      margin-bottom: 1rem;
      background: linear-gradient(to right, #fff, #c7d2fe);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero-text p {
      color: var(--text-muted);
      font-size: clamp(1rem, 3vw, 1.2rem);
      max-width: 600px;
      margin: 0 auto;
    }

    /* --- GLASS CARD --- */
    .glass-card {
      background: rgba(30, 41, 59, 0.6);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 24px;
      padding: 2.5rem;
      width: 100%;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    /* Upload Area */
    .upload-area {
      border: 2px dashed rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      padding: 3rem 1.5rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      background: rgba(255,255,255,0.02);
    }
    
    .upload-area:hover, .upload-area.drag-over {
      border-color: var(--primary);
      background: rgba(99, 102, 241, 0.08);
      transform: scale(1.01);
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      transition: transform 0.3s;
    }
    .upload-area:hover .upload-icon { transform: translateY(-5px); }

    .file-info { margin-top: 1rem; font-weight: 500; color: var(--accent); display: none; }

    /* Action Bar */
    .action-bar {
      margin-top: 2rem;
      display: flex;
      justify-content: center;
    }
    .btn-analyze {
      width: 100%;
      max-width: 400px;
      padding: 1rem;
      font-size: 1.1rem;
      border-radius: 12px;
    }
    .btn-analyze:disabled { opacity: 0.7; cursor: not-allowed; filter: grayscale(1); }

    /* --- LOADING STATE --- */
    .loader-container {
      display: none;
      margin-top: 2rem;
      text-align: center;
    }
    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
      margin: 1rem 0 0.5rem;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      width: 0%;
      border-radius: 10px;
      animation: progress 2s ease-in-out infinite;
    }
    @keyframes progress { 0% { width: 0%; transform: translateX(-100%); } 100% { width: 100%; transform: translateX(0); } }

    /* --- RESULTS SECTION --- */
    .results-grid {
      display: grid;
      gap: 1.5rem;
      margin-top: 2.5rem;
    }

    .result-item {
      background: rgba(15, 23, 42, 0.6);
      border-left: 4px solid var(--primary);
      border-radius: 12px;
      padding: 1.5rem;
      animation: slideUp 0.5s ease forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    .badge {
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .badge-high { background: rgba(16, 185, 129, 0.2); color: #34d399; }
    .badge-med { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
    .badge-low { background: rgba(239, 68, 68, 0.2); color: #f87171; }

    .clause-text {
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
      line-height: 1.6;
      background: rgba(0,0,0,0.3);
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      color: #cbd5e1;
    }

    .ai-insight {
      display: flex;
      gap: 1rem;
      font-size: 0.95rem;
      color: var(--text-muted);
      align-items: flex-start;
    }
    .ai-insight i { color: var(--secondary); margin-top: 3px; }

    /* --- AUTH MODAL --- */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(8px);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal-overlay.active { opacity: 1; pointer-events: all; }

    .auth-card {
      background: #1e293b;
      width: 100%;
      max-width: 420px;
      border-radius: 24px;
      padding: 2rem;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .modal-overlay.active .auth-card { transform: translateY(0); }

    .auth-tabs {
      display: flex;
      margin-bottom: 2rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .auth-tab {
      flex: 1;
      text-align: center;
      padding: 1rem;
      cursor: pointer;
      color: var(--text-muted);
      font-weight: 600;
      transition: all 0.3s;
      position: relative;
    }
    .auth-tab.active { color: white; }
    .auth-tab.active::after {
      content: '';
      position: absolute; bottom: -1px; left: 0; width: 100%;
      height: 2px; background: var(--primary);
    }

    .input-group { margin-bottom: 1.5rem; position: relative; }
    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }
    .input-group input {
      width: 100%;
      background: rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.1);
      padding: 0.8rem 1rem 0.8rem 2.5rem;
      border-radius: 8px;
      color: white;
      font-family: inherit;
      transition: border-color 0.3s;
    }
    .input-group i {
      position: absolute;
      left: 1rem;
      top: 2.3rem;
      color: #64748b;
    }
    .input-group input:focus { border-color: var(--primary); }

    .close-modal {
      position: absolute;
      top: 1rem; right: 1rem;
      background: none; border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 1.2rem;
    }

    /* --- FOOTER --- */
    footer {
      border-top: 1px solid rgba(255,255,255,0.05);
      padding: 2rem;
      text-align: center;
      color: #64748b;
      font-size: 0.9rem;
      background: rgba(15, 23, 42, 0.9);
    }
    
    /* --- ANIMATIONS --- */
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    /* --- MEDIA QUERIES --- */
    @media (max-width: 600px) {
      .hero-text h1 { font-size: 2.5rem; }
      .glass-card { padding: 1.5rem; }
      .navbar { padding: 1rem; }
      .auth-card { margin: 1rem; }
    }
  </style>
</head>
<body>

<!-- Animated Background -->
<div class="blob-cont">
  <div class="blob blob-1"></div>
  <div class="blob blob-2"></div>
  <div class="blob blob-3"></div>
</div>

<!-- Navigation -->
<nav class="navbar">
  <a href="#" class="logo">
    <i class="fa-solid fa-cube"></i> MY-LogiC
  </a>
  
  <div class="nav-actions" id="guestNav">
    <button class="btn-ghost" onclick="openAuthModal('login')">Log In</button>
    <button class="btn-primary" onclick="openAuthModal('signup')">Sign Up</button>
  </div>

  <!-- User Profile with Dropdown -->
  <!-- REMOVED onclick from parent ID userNav -->
  <div class="user-profile" id="userNav"> 
    <!-- ADDED onclick to the trigger only -->
    <div class="user-info-trigger" onclick="toggleUserDropdown()">
      <div class="avatar" id="userInitials">JD</div>
      <span id="userNameDisplay">John Doe</span>
      <i class="fa-solid fa-chevron-down" style="font-size: 0.8rem; opacity: 0.7;"></i>
    </div>

    <div class="user-dropdown-menu">
      <div class="dropdown-item">
        <i class="fa-solid fa-user-gear"></i> Account Settings
      </div>
      <div class="dropdown-item">
        <i class="fa-solid fa-clock-rotate-left"></i> Analysis History
      </div>
      <div class="dropdown-divider"></div>
      <button class="dropdown-item btn-logout-item" onclick="logout()">
        <i class="fa-solid fa-power-off"></i> Log Out
      </button>
    </div>
  </div>
</nav>

<!-- Main Application -->
<div class="container">
  <div class="hero-text">
    <h1>Contract Intelligence<br>Reimagined</h1>
    <p>Upload your legal documents and let our AI engine detect risks, extract clauses, and ensure compliance in milliseconds.</p>
  </div>

  <div class="glass-card">
    
    <!-- Upload Section -->
    <div class="upload-area" id="dropZone">
      <input type="file" id="pdfInput" accept=".pdf" style="display:none" onchange="handleFileSelect(this)">
      <div class="upload-content">
        <i class="fa-solid fa-cloud-bolt upload-icon"></i>
        <h3>Drop your PDF here</h3>
        <p style="color:var(--text-muted); font-size: 0.9rem; margin-top:0.5rem">or click to browse files</p>
      </div>
      <div class="file-info" id="fileInfo">
        <i class="fa-solid fa-file-pdf"></i> <span id="fileName">contract.pdf</span>
        <i class="fa-solid fa-circle-xmark" style="cursor:pointer; margin-left:10px; color:var(--danger)" onclick="clearFile(event)"></i>
      </div>
    </div>

    <!-- Actions -->
    <div class="action-bar">
      <button class="btn-primary btn-analyze" id="analyzeBtn" onclick="analyzeContract()">
        Analyze Document
      </button>
    </div>

    <!-- Loading State -->
    <div class="loader-container" id="loader">
      <p style="color:var(--accent); font-weight:500">Processing Document Logic...</p>
      <div class="progress-bar"><div class="progress-fill"></div></div>
      <small style="color:var(--text-muted)">Connecting to Neural Engine...</small>
    </div>

    <!-- Error Message -->
    <div id="errorMsg" style="display:none; color:var(--danger); background:rgba(239,68,68,0.1); padding:1rem; border-radius:8px; margin-top:1.5rem; text-align:center; border:1px solid rgba(239,68,68,0.2);"></div>

    <!-- Results Section -->
    <div class="results-grid" id="results"></div>
  </div>
</div>

<!-- Footer -->
<footer>
  <p>&copy; 2026 MY-LogiC Inc. Contract Clause AI-Powered Legal Analysis.</p>
</footer>

<!-- Authentication Modal -->
<div class="modal-overlay" id="authModal">
  <div class="auth-card">
    <button class="close-modal" onclick="closeAuthModal()"><i class="fa-solid fa-xmark"></i></button>
    
    <div class="auth-tabs">
      <div class="auth-tab active" id="tab-login" onclick="switchTab('login')">Log In</div>
      <div class="auth-tab" id="tab-signup" onclick="switchTab('signup')">Sign Up</div>
    </div>

    <!-- Login Form -->
    <form id="loginForm" onsubmit="handleAuth(event, 'login')">
      <div class="input-group">
        <label>Email Address</label>
        <i class="fa-solid fa-envelope"></i>
        <input type="email" placeholder="name@company.com" required value="demo@mylogic.ai">
      </div>
      <div class="input-group">
        <label>Password</label>
        <i class="fa-solid fa-lock"></i>
        <input type="password" placeholder="••••••••" required value="password">
      </div>
      <button type="submit" class="btn-primary" style="width:100%">Log In</button>
    </form>

    <!-- Signup Form (Hidden by default) -->
    <form id="signupForm" style="display:none" onsubmit="handleAuth(event, 'signup')">
      <div class="input-group">
        <label>Full Name</label>
        <i class="fa-solid fa-user"></i>
        <input type="text" placeholder="John Doe" required>
      </div>
      <div class="input-group">
        <label>Email Address</label>
        <i class="fa-solid fa-envelope"></i>
        <input type="email" placeholder="name@company.com" required>
      </div>
      <div class="input-group">
        <label>Password</label>
        <i class="fa-solid fa-lock"></i>
        <input type="password" placeholder="Create a password" required>
      </div>
      <button type="submit" class="btn-primary" style="width:100%">Create Account</button>
    </form>

  </div>
</div>
<script>
const BACKEND_URL = "https://contract-clause-jvhl.onrender.com";

const state = {
  isLoggedIn: false,
  user: null,
  file: null
};

const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('pdfInput');
const userNav = document.getElementById('userNav');

document.addEventListener('click', (e) => {
  if (state.isLoggedIn && !userNav.contains(e.target)) {
    userNav.classList.remove('active');
  }
});

dropZone.addEventListener('click', () => fileInput.click());

dropZone.addEventListener('dragover', (e) => {
  e.preventDefault();
  dropZone.classList.add('drag-over');
});

dropZone.addEventListener('dragleave', () => {
  dropZone.classList.remove('drag-over');
});

dropZone.addEventListener('drop', (e) => {
  e.preventDefault();
  dropZone.classList.remove('drag-over');
  if (e.dataTransfer.files.length) {
    fileInput.files = e.dataTransfer.files;
    handleFileSelect(fileInput);
  }
});

function handleFileSelect(input) {
  if (input.files && input.files[0]) {
    state.file = input.files[0];
    document.querySelector('.upload-content').style.display = 'none';
    const info = document.getElementById('fileInfo');
    info.style.display = 'block';
    document.getElementById('fileName').textContent = state.file.name;
    document.getElementById('errorMsg').style.display = 'none';
  }
}

function clearFile(e) {
  e.stopPropagation();
  state.file = null;
  fileInput.value = '';
  document.querySelector('.upload-content').style.display = 'block';
  document.getElementById('fileInfo').style.display = 'none';
  document.getElementById('results').innerHTML = '';
}

function toggleUserDropdown() {
  document.getElementById('userNav').classList.toggle('active');
}

function logout() {
  state.isLoggedIn = false;
  state.user = null;
  state.file = null;

  document.getElementById('guestNav').style.display = 'flex';
  document.getElementById('userNav').style.display = 'none';
  document.getElementById('results').innerHTML = '';
  fileInput.value = '';
}

function openAuthModal(mode) {
  document.getElementById('authModal').classList.add('active');
}

function closeAuthModal() {
  document.getElementById('authModal').classList.remove('active');
}

function handleAuth(e) {
  e.preventDefault();
  state.isLoggedIn = true;
  state.user = { name: "Demo User" };

  document.getElementById('guestNav').style.display = 'none';
  document.getElementById('userNav').style.display = 'flex';
  document.getElementById('userNameDisplay').innerText = "Demo User";
  document.getElementById('userInitials').innerText = "D";

  closeAuthModal();
}

async function analyzeContract() {
  const errorMsg = document.getElementById('errorMsg');
  const resultsDiv = document.getElementById('results');
  const loader = document.getElementById('loader');
  const btn = document.getElementById('analyzeBtn');

  if (!state.file) {
    errorMsg.textContent = "Please upload a PDF contract first.";
    errorMsg.style.display = 'block';
    return;
  }

  if (!state.isLoggedIn) {
    openAuthModal();
    return;
  }

  errorMsg.style.display = 'none';
  resultsDiv.innerHTML = '';
  loader.style.display = 'block';
  btn.disabled = true;
  btn.innerHTML = "Scanning Document...";

  const formData = new FormData();
  formData.append("file", state.file);

  try {
    const res = await fetch(`${BACKEND_URL}/analyze`, {
      method: "POST",
      body: formData
    });

    if (!res.ok) {
      throw new Error("Server Error: " + res.status);
    }

    const data = await res.json();

    loader.style.display = 'none';
    btn.disabled = false;
    btn.innerHTML = "Analyze Document";

    if (!data.clauses || data.clauses.length === 0) {
      errorMsg.textContent = "No clauses found in document.";
      errorMsg.style.display = 'block';
      return;
    }

    renderResults(data.clauses);

  } catch (err) {
    loader.style.display = 'none';
    btn.disabled = false;
    btn.innerHTML = "Analyze Document";

    console.error(err);

    errorMsg.textContent =
      "Unable to connect to analysis server. If first request, wait 30–60 seconds (Render cold start) and try again.";
    errorMsg.style.display = 'block';
  }
}

function renderResults(clauses) {
  const container = document.getElementById('results');

  clauses.forEach((c, index) => {
    let badgeClass = 'badge-high';
    let color = '#10b981';
    let icon = 'fa-check-shield';

    if (c.confidence_score < 70) {
      badgeClass = 'badge-med';
      color = '#f59e0b';
      icon = 'fa-triangle-exclamation';
    }

    if (c.confidence_score < 50) {
      badgeClass = 'badge-low';
      color = '#ef4444';
      icon = 'fa-skull-crossbones';
    }

    container.innerHTML += `
      <div class="result-item" style="border-color:${color}">
        <div class="result-header">
          <div style="display:flex; align-items:center; gap:0.5rem; font-weight:700; color:#fff">
            <i class="fa-solid ${icon}" style="color:${color}"></i>
            ${c.clause_type}
          </div>
          <span class="badge ${badgeClass}">
            ${c.confidence_score}% Confidence
          </span>
        </div>

        <div class="clause-text">
          "${c.extracted_text}"
        </div>

        <div class="ai-insight">
          <i class="fa-solid fa-robot"></i>
          <div>
            <strong style="color:#fff">AI Analysis</strong><br>
            ${c.risk_flag_reason}
          </div>
        </div>
      </div>
    `;
  });
}
</script>


</body>

</html>

